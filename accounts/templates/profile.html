{% extends 'base.html' %}

{% block content %}

<div class="container mt-3 mb-5">
    <div class="row">
        <div class="col-md-4">
            <div class="card">
                {% if profile.profile_pic %}
                    <img src="{{ profile.profile_pic }}" class="card-img-top">
                    {% else %}
                    <img src="https://img.freepik.com/premium-vector/accoun-vector-icon-with-long-shadow-white-illustration-isolated-blue-round-background-graphic-web-design_549897-771.jpg" class="card-img-top">
                    {% endif %}

                <div class="card-body">
                    <h4 class="card-title">{{ profile.user.first_name }} {{ profile.user.last_name }}</h4>
                    <p class="card-text"><strong>Department:</strong> {{ profile.department }}</p>
                    <p class="card-text"><strong>University:</strong> {{ profile.university }}</p>
                    <p class="card-text"><strong>Google Scholar:</strong> <a href="{{ profile.gscholar }}" target="_blank">{{ profile.gscholar }}</a></p>

                    <p class="card-text"><strong>Area of Interest:</strong>
                        {% for skil in profile.get_skills %}
                            {{ skil }},
                        {% endfor %}
                    </p>
                    {% if user.username != profile.user.username %}
                        {% if is_following %}
                            <a href="{% url 'follow_user' profile.user.username %}" class="btn btn-danger">Unfollow</a>
                        {% else %}
{#                            <a href="{% url 'follow_user' profile.user.i %}" class="btn btn-primary">Follow</a>#}
                        {% endif %}
                    {% endif %}

                </div>
            </div>
        </div>

        <div class="col-md-8">
            <div class="card">
                <div class="card-header text-white" style="background-color: #4bb8c2;">
                    <h5>My Posts</h5>
                </div>
                <div class="card-body">
                    {% for post in posts %}
                        <div class="card mb-3">
                            <a href="{% url 'posts' post.id %}">
                                <div class="card-header">{{ post.title }}</div>
{#                                <div class="card-body">#}
{#                                    <p class="card-text">{{ post.abstract }}</p>#}
{#                            </div>#}
                            </a>
                        </div>
                    {% empty %}
                        <p>No posts yet!</p>
                        
                    {% endfor %}
                </div>
            </div>
        <br>
{#        <div class="card">#}
{#                        <h4 class="card-header">Comments ({{ post.comments.count }})<i class='fas fa-comment-alt ml-2'#}
{#                                                                                       aria-hidden="true"></i></h4>#}
{#                        <div class="card-body">#}
{#                            {% if post.comments.all %}#}
{#                                {% for comment in post.comments.all %}#}
{#                                    <div class="row mt-2">#}
{#                                        <div class="col-md-2 padding-0">#}
{#                                            <p class="text-primary">{{ comment.name }}</p>#}
{#                                        </div>#}
{#                                        <div class="col-md-10 padding-0">#}
{#                                            <div class="row">#}
{#                                                <div class="col-md-9">#}
{#                                                    <p>{{ comment.body }}</p>#}
{#                                                </div>#}
{#                                                <div class="col md-3">#}
{#                                                    <p class="text-right text-secondary">{{ comment.created_at|date:'F d, Y' }}</p>#}
{#                                                </div>#}
{#                                            </div>#}
{#                                        </div>#}
{#                                        <div class="col-md-12 padding-0">#}
{#                                            <div class="row">#}
{#                                                <div class="col-md-3">#}
{#                                                    <p>Reply: <span class="text-primary">{{ user.username }}</span></p>#}
{#                                                </div>#}
{#                                                <div class="col-md-5">#}
{#                                                    <p><span class="">{{ comment.reply_content }}</span></p></p>#}
{#                                                </div>#}
{#                                                <div class="col-md-4">#}
{#                                                    <p class="text-right text-secondary">{{ comment.created_at|date:'F d, Y' }}</p>#}
{#                                                </div>#}
{#                                            </div>#}
{#                                        </div>#}
{#                                        <div class="row reply mx-0 ml-3">#}
{#                                            <label class="text-primary text-center" data-toggle="collapse"#}
{#                                                   data-target="#replyBox{{ comment.id }}" aria-expanded="false"#}
{#                                                   aria-controls="replyBox{{ comment.id }}">#}
{#                                                Reply#}
{#                                            </label>#}
{#                                            <div class="collapse" id="replyBox{{ comment.id }}">#}
{#                                                <form action="{% url 'add_reply' comment.id %}" method="post">#}
{#                                                    {% csrf_token %}#}
{#                                                    <div class="col-md-2 padding-0">#}
{#                                                        <textarea name="reply_content" rows="2" cols="30"#}
{#                                                                  placeholder="Add a Reply"></textarea>#}
                                                        {#                                    <input type="hidden" name="cid" value="{{ comment.id }}">#}
{#                                                    </div>#}
{#                                                    <div class="col-md-4 padding-0">#}
                                                        {#                                    <input type="hidden" name="pid" value="{{ post.id }}">#}
{#                                                        <button type="submit" class="btn btn-primary">Reply</button>#}
{#                                                    </div>#}
{#                                                </form>#}
{#                                            </div>#}
{#                                        </div>#}
{#                                    </div>#}
{#                                    <hr>#}
{#                                {% endfor %}#}
{#                            {% else %}#}
{#                                <p>No comments yet.</p>#}
{#                            {% endif %}#}
{##}
{#                            <form method="post" action="{% url 'personal_comment' %}">#}
{#                                {% csrf_token %}#}
{#                                <div class="row">#}
{#                                    <strong class="ml-3">{{ user.username }}</strong>&nbsp;<i#}
{#                                        class='fas fa-user-alt mt-1 ml-2' aria-hidden="true"></i>#}
{#                                </div>#}
{#                                <div class="row mt-2">#}
{#                                    <div class="col-md-10 padding-0">#}
{#                                        {{ comment_form.as_p }}#}
{#                                    </div>#}
{#                                </div>#}
{#                                <div class="row ml-2">#}
                                    {#                <input type="hidden" name="pid" value="{{ post.id }}">#}
{#                                    <input type="hidden" name="pid" value="">#}
{#                                    <button type="submit" class="btn btn-primary">Add Comment</button>#}
{#                                </div>#}
{#                            </form>#}
{#                        </div>#}
{#                    </div>#}
        </div>
    </div>
</div>
{% endblock %}
